# Nexus Registry — Configuration Template
# Copy to registry.local.yaml or set env vars with the same names uppercased.

registry:
  port: 8080
  read_timeout_seconds: 30
  write_timeout_seconds: 30
  idle_timeout_seconds: 120
  frontend_url: "http://localhost:3000"   # base URL of the web frontend (used in email links)
  role: standalone                        # standalone | federated | root
  admin_secret: ""                        # set via REGISTRY_ADMIN_SECRET env var — never commit a value here

database:
  url: "postgres://nexus:nexus@localhost:5432/nexus?sslmode=disable"
  max_connections: 25
  min_connections: 5
  max_idle_time_seconds: 300

log:
  level: info   # debug | info | warn | error
  format: json  # json | console

identity:
  ca_cert_path: ""      # path to Nexus CA certificate PEM
  ca_key_path: ""       # path to Nexus CA private key PEM
  cert_validity_days: 365

dns:
  challenge_ttl_minutes: 15

health:
  check_interval: "5m"
  probe_timeout: "10s"
  fail_threshold: 3

trust_ledger:
  enabled: true

free_tier:
  trust_root: "nexusagentprotocol.com"
  max_agents: 0  # 0 = unlimited; set > 0 to enforce a per-user agent quota

email:
  smtp_host: ""
  smtp_port: 587
  smtp_username: ""
  smtp_password: ""
  from_address: "noreply@nexusagentprotocol.com"

federation:
  root_registry_url: ""           # federated mode: NAP root registry base URL
  intermediate_ca_cert: ""        # federated mode: path to intermediate CA cert PEM file
  intermediate_ca_key: ""         # federated mode: path to intermediate CA key PEM file
  dns_discovery_enabled: true
  remote_resolve_timeout: 5s

oauth:
  github:
    client_id: ""
    client_secret: ""
    redirect_url: "http://localhost:8080/api/v1/auth/oauth/github/callback"
  google:
    client_id: ""
    client_secret: ""
    redirect_url: "http://localhost:8080/api/v1/auth/oauth/google/callback"
